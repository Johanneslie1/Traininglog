import{j as s,d as N}from"./index-oRYx91ZM.js";import{b as o,u as C}from"./react-vendor-DQubVtpq.js";import{A as v,o as b,y as w,q as E,n as S}from"./firebase-vendor-D8cnFtZG.js";import{u as L,C as D}from"./CreateExerciseDialog-BGvh7GMo.js";import"./auth-DlnMWTUc.js";function A(i){const[t,d]=o.useState(null),[x,c]=o.useState(null),[p,u]=o.useState(!0);return o.useEffect(()=>{const n=v(i,l=>{const a=[];l.forEach(m=>{a.push({...m.data(),id:m.id})}),d(a),u(!1)},l=>{console.error("Error fetching collection:",l),c(l),u(!1)});return()=>n()},[i]),{documents:t,error:x,loading:p}}const B=()=>{const{user:i}=L(),[t,d]=o.useState({search:"",category:[],type:"all"}),[x,c]=o.useState(!1),p=C(),u=new URLSearchParams(p.search);o.useEffect(()=>{u.get("showCreate")==="true"&&c(!0)},[u]);const n=[];t.type==="custom"&&i?n.push(b("userId","==",i.id)):t.type==="default"&&n.push(b("userId","==",null)),n.push(w("name"));const l=E(S(N,"exercises"),...n),{documents:a,loading:m,error:h}=A(l),g=a==null?void 0:a.filter(e=>{var f;if(!e)return!1;const r=e.name.toLowerCase().includes(t.search.toLowerCase())||((f=e.description)==null?void 0:f.toLowerCase().includes(t.search.toLowerCase())),y=t.category.length===0||e.category&&t.category.includes(e.category);return r&&y}),j=a?[...new Set(a.filter(e=>e&&e.category).map(e=>e.category))]:[];return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Exercise Library"}),s.jsx("button",{onClick:()=>c(!0),className:"bg-accent-primary text-white px-4 py-2 rounded-lg hover:bg-accent-primary/90",children:"Create Exercise"})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search exercises...",className:"flex-1 px-4 py-2 rounded-lg bg-bg-secondary text-text-primary border border-border",value:t.search,onChange:e=>d(r=>({...r,search:e.target.value}))}),s.jsxs("select",{className:"px-4 py-2 rounded-lg bg-bg-secondary text-text-primary border border-border",value:t.type,onChange:e=>d(r=>({...r,type:e.target.value})),children:[s.jsx("option",{value:"all",children:"All Exercises"}),s.jsx("option",{value:"default",children:"Default Exercises"}),s.jsx("option",{value:"custom",children:"Custom Exercises"})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(e=>s.jsx("button",{onClick:()=>d(r=>({...r,category:r.category.includes(e)?r.category.filter(y=>y!==e):[...r.category,e]})),className:`px-3 py-1 rounded-full text-sm ${t.category.includes(e)?"bg-accent-primary text-white":"bg-bg-secondary text-text-secondary border border-border"}`,children:e},e))})]}),m&&s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-accent-primary mx-auto"})}),h&&s.jsxs("div",{className:"text-red-500 text-center py-8",children:["Error loading exercises: ",h.message]}),!m&&!h&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g==null?void 0:g.map(e=>s.jsxs("div",{className:"p-4 rounded-lg bg-bg-secondary border border-border hover:border-accent-primary transition-colors",children:[s.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-bg-primary",children:e.category}),e.userId?s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-accent-primary/10 text-accent-primary",children:"Custom"}):s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-green-500/10 text-green-500",children:"Default"})]}),e.description&&s.jsx("p",{className:"text-sm text-text-secondary line-clamp-2",children:e.description})]},e.id||""))}),x&&s.jsx(D,{onClose:()=>c(!1),onSuccess:()=>{c(!1)}})]})};export{B as default};
//# sourceMappingURL=ExerciseOverview-BiT0ShrG.js.map
