import{j as t,c as f,d as v}from"./index-BW4wnaLN.js";import{b as c,d as E}from"./react-vendor-DOxSmbpi.js";import{G as k,E as P,n as C,o as w,D as S,q as D}from"./firebase-vendor-CDzPPbaT.js";import{u as N}from"./useAuth-Bl_XYtwH.js";function F(m){const[a,u]=c.useState(null),[p,d]=c.useState(null),[r,n]=c.useState(!0);return c.useEffect(()=>{const i=k(m,x=>{const l=[];x.forEach(h=>{l.push({...h.data(),id:h.id})}),u(l),n(!1)},x=>{console.error("Error fetching collection:",x),d(x),n(!1)});return()=>i()},[m]),{documents:a,error:p,loading:r}}const L=["Chest","Back","Shoulders","Biceps","Triceps","Legs","Core","Full Body","Cardio"],B=["Strength","Hypertrophy","Endurance","Power","Cardio","Flexibility","Balance"],q=["Beginner","Intermediate","Advanced"],T=({onClose:m,onSuccess:a})=>{const{user:u}=N(),[p,d]=c.useState(!1),[r,n]=c.useState({name:"",bodyParts:[],type:"Strength",trainingCategory:"Beginner",description:""}),[i,x]=c.useState({}),l=()=>{var s,o,g;const e={};return(s=r.name)!=null&&s.trim()?r.name.length<3&&(e.name="Name must be at least 3 characters"):e.name="Exercise name is required",(o=r.bodyParts)!=null&&o.length||(e.bodyParts="Select at least one body part"),(g=r.description)!=null&&g.trim()?r.description.length<10&&(e.description="Description must be at least 10 characters"):e.description="Description is required",x(e),Object.keys(e).length===0},h=async e=>{if(e.preventDefault(),!u){f.error("You must be logged in to create exercises");return}if(!l()){f.error("Please fill in all required fields");return}d(!0);try{const s={name:r.name.trim(),description:r.description.trim(),type:r.type==="Cardio"?"cardio":r.type==="Flexibility"?"flexibility":"strength",category:r.type==="Cardio"?"cardio":r.type==="Flexibility"?"stretching":r.bodyParts.length>1?"compound":"isolation",primaryMuscles:r.bodyParts.map(g=>g.toLowerCase().replace(/\s+/g,"_")),secondaryMuscles:[],instructions:[r.description],defaultUnit:r.type==="Cardio"?"time":"kg",metrics:{trackWeight:r.type!=="Cardio",trackReps:r.type!=="Cardio",trackTime:r.type==="Cardio",trackDistance:!1,trackRPE:!0},customExercise:!0,userId:u.id},o=await P(C(v,"exercises"),s);f.success("Exercise created successfully!"),a==null||a(o.id),m()}catch(s){console.error("Error creating exercise:",s),f.error("Failed to create exercise. Please try again.")}finally{d(!1)}},b=e=>{const s=e.target.value;n(o=>({...o,type:s}))},y=e=>{n(s=>({...s,trainingCategory:e}))},j=e=>{n(s=>({...s,bodyParts:s.bodyParts.includes(e)?s.bodyParts.filter(o=>o!==e):[...s.bodyParts,e]}))};return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:t.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-[#1a1a1a] px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:t.jsxs("form",{onSubmit:h,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-white/90",children:"Exercise Name"}),t.jsx("input",{type:"text",id:"name",required:!0,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm placeholder-white/40",value:r.name,onChange:e=>n(s=>({...s,name:e.target.value}))}),i.name&&t.jsx("p",{className:"mt-1 text-sm text-red-400",children:i.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Body Parts"}),t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:L.map(e=>t.jsx("button",{type:"button",className:`rounded-full px-3 py-1 text-sm ${r.bodyParts.includes(e)?"bg-blue-600 text-white":"bg-[#2a2a2a] text-white/70 hover:bg-[#3a3a3a]"}`,onClick:()=>j(e),children:e},e))}),i.bodyParts&&t.jsx("p",{className:"mt-1 text-sm text-red-400",children:i.bodyParts})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-white/90",children:"Exercise Type"}),t.jsx("select",{id:"type",required:!0,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:r.type,onChange:b,children:B.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-white/90",children:"Training Category"}),t.jsx("select",{id:"category",required:!0,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:r.trainingCategory,onChange:e=>y(e.target.value),children:q.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-white/90",children:"Description"}),t.jsx("textarea",{id:"description",rows:3,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm placeholder-white/40",value:r.description,onChange:e=>n(s=>({...s,description:e.target.value}))}),i.description&&t.jsx("p",{className:"mt-1 text-sm text-red-400",children:i.description})]}),t.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3",children:[t.jsx("button",{type:"submit",disabled:p,className:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:col-start-2 sm:text-sm disabled:opacity-50",children:p?"Creating...":"Create Exercise"}),t.jsx("button",{type:"button",onClick:m,className:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:col-start-1 sm:mt-0 sm:text-sm",children:"Cancel"})]})]})})})})},O=()=>{const{user:m}=N(),[a,u]=c.useState({search:"",category:[],type:"all"}),[p,d]=c.useState(!1),r=E(),n=new URLSearchParams(r.search);c.useEffect(()=>{n.get("showCreate")==="true"&&d(!0)},[n]);const i=[];a.type==="custom"&&m?i.push(w("userId","==",m.id)):a.type==="default"&&i.push(w("userId","==",null)),i.push(S("name"));const x=D(C(v,"exercises"),...i),{documents:l,loading:h,error:b}=F(x),y=l==null?void 0:l.filter(e=>{var g;if(!e)return!1;const s=e.name.toLowerCase().includes(a.search.toLowerCase())||((g=e.description)==null?void 0:g.toLowerCase().includes(a.search.toLowerCase())),o=a.category.length===0||e.category&&a.category.includes(e.category);return s&&o}),j=l?[...new Set(l.filter(e=>e&&e.category).map(e=>e.category))]:[];return t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Exercise Library"}),t.jsx("button",{onClick:()=>d(!0),className:"bg-accent-primary text-white px-4 py-2 rounded-lg hover:bg-accent-primary/90",children:"Create Exercise"})]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("input",{type:"text",placeholder:"Search exercises...",className:"flex-1 px-4 py-2 rounded-lg bg-bg-secondary text-text-primary border border-border",value:a.search,onChange:e=>u(s=>({...s,search:e.target.value}))}),t.jsxs("select",{className:"px-4 py-2 rounded-lg bg-bg-secondary text-text-primary border border-border",value:a.type,onChange:e=>u(s=>({...s,type:e.target.value})),children:[t.jsx("option",{value:"all",children:"All Exercises"}),t.jsx("option",{value:"default",children:"Default Exercises"}),t.jsx("option",{value:"custom",children:"Custom Exercises"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(e=>t.jsx("button",{onClick:()=>u(s=>({...s,category:s.category.includes(e)?s.category.filter(o=>o!==e):[...s.category,e]})),className:`px-3 py-1 rounded-full text-sm ${a.category.includes(e)?"bg-accent-primary text-white":"bg-bg-secondary text-text-secondary border border-border"}`,children:e},e))})]}),h&&t.jsx("div",{className:"text-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-accent-primary mx-auto"})}),b&&t.jsxs("div",{className:"text-red-500 text-center py-8",children:["Error loading exercises: ",b.message]}),!h&&!b&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:y==null?void 0:y.map(e=>t.jsxs("div",{className:"p-4 rounded-lg bg-bg-secondary border border-border hover:border-accent-primary transition-colors",children:[t.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary mb-2",children:[t.jsx("span",{className:"px-2 py-0.5 rounded-full bg-bg-primary",children:e.category}),e.userId?t.jsx("span",{className:"px-2 py-0.5 rounded-full bg-accent-primary/10 text-accent-primary",children:"Custom"}):t.jsx("span",{className:"px-2 py-0.5 rounded-full bg-green-500/10 text-green-500",children:"Default"})]}),e.description&&t.jsx("p",{className:"text-sm text-text-secondary line-clamp-2",children:e.description})]},e.id||""))}),p&&t.jsx(T,{onClose:()=>d(!1),onSuccess:()=>{d(!1)}})]})};export{O as default};
//# sourceMappingURL=ExerciseOverview-DH5OZ_8D.js.map
