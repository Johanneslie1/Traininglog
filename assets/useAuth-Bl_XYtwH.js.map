{"version":3,"file":"useAuth-Bl_XYtwH.js","sources":["../../src/hooks/useAuth.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '@/store/store';\r\nimport { setUser, setLoading } from '@/features/auth/authSlice';\r\nimport { getCurrentUser, User } from '@/services/firebase/auth';\r\nimport { logger } from '@/utils/logger';\r\n\r\nexport const useAuth = () => {\r\n  const dispatch = useDispatch();\r\n  const { user, isLoading, isAuthenticated } = useSelector(\r\n    (state: RootState) => state.auth\r\n  );\r\n  \r\n  // Prevent double initialization in React StrictMode\r\n  const initRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (initRef.current) return;\r\n    initRef.current = true;\r\n    \r\n    logger.debug('[Auth] Initializing auth state...');\r\n    \r\n    const initAuth = async () => {\r\n      try {\r\n        const user = await getCurrentUser();\r\n        if (user) {\r\n          logger.debug('[Auth] User authenticated:', user.id);\r\n        } else {\r\n          logger.debug('[Auth] No authenticated user');\r\n        }\r\n        dispatch(setUser(user));\r\n      } catch (error) {\r\n        logger.error('[Auth] Error during auth initialization:', error);\r\n        dispatch(setUser(null));\r\n      } finally {\r\n        dispatch(setLoading(false));\r\n      }\r\n    };\r\n\r\n    initAuth();\r\n    \r\n    return () => {\r\n      logger.debug('[Auth] Cleaning up auth listener');\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    user: user as User | null,\r\n    isLoading,\r\n    isAuthenticated,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n"],"names":["useAuth","dispatch","useDispatch","user","isLoading","isAuthenticated","useSelector","state","initRef","useRef","useEffect","getCurrentUser","logger","setUser","error","setLoading"],"mappings":"0HAOO,MAAMA,EAAU,IAAM,CAC3B,MAAMC,EAAWC,EAAA,EACX,CAAE,KAAAC,EAAM,UAAAC,EAAW,gBAAAC,CAAA,EAAoBC,EAC1CC,GAAqBA,EAAM,IAAA,EAIxBC,EAAUC,EAAAA,OAAO,EAAK,EAE5BC,OAAAA,EAAAA,UAAU,IACJF,EAAQ,QAAS,QACrBA,EAAQ,QAAU,IAID,SAAY,CAC3B,GAAI,CACF,MAAML,EAAO,MAAMQ,EAAA,EACfR,EACFS,EAAO,MAAM,6BAA8BT,EAAK,EAAE,EAElDS,EAAO,MAAM,8BAA8B,EAE7CX,EAASY,EAAQV,CAAI,CAAC,CAAA,OACfW,EAAO,CACdF,EAAO,MAAM,2CAA4CE,CAAK,EAC9Db,EAASY,EAAQ,IAAI,CAAC,CAAA,QACxB,CACEZ,EAASc,EAAW,EAAK,CAAC,CAAA,CAC5B,GAGF,EAEO,IAAM,CACoC,GAEhD,CAACd,CAAQ,CAAC,EAEN,CACL,KAAAE,EACA,UAAAC,EACA,gBAAAC,CAAA,CAEJ"}