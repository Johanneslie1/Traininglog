import{j as e,E,k as L}from"./index-BW4wnaLN.js";import{b as l,u as M}from"./react-vendor-DOxSmbpi.js";import{P as D}from"./ProgramModal-gqqF9Ltc.js";import{F as S,a as F,P as B}from"./ProgramBuilder-BzEeHDp7.js";import{F as C}from"./ExerciseHistoryPicker-mDNrnu8A.js";import{j as U}from"./firebase-vendor-CDzPPbaT.js";import"./useAuth-Bl_XYtwH.js";import"./speedAgility-DxCoHWLB.js";function $(c,x){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:x},c),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}))}const I=l.forwardRef($);function O(c,x){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:x},c),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const z=l.forwardRef(O),R=({onClose:c,onUseTemplate:x})=>{const[h,b]=l.useState([]),[n,v]=l.useState(null),[y,g]=l.useState(!1);l.useEffect(()=>{N()},[]);const N=()=>{try{const s=localStorage.getItem("program-templates");if(s){const r=JSON.parse(s);b(r.sort((a,p)=>new Date(p.createdAt).getTime()-new Date(a.createdAt).getTime()))}}catch(s){console.error("Error loading templates:",s)}},f=s=>{if(confirm("Are you sure you want to delete this template?"))try{const r=h.filter(a=>a.id!==s);localStorage.setItem("program-templates",JSON.stringify(r)),b(r),(n==null?void 0:n.id)===s&&(v(null),g(!1))}catch(r){console.error("Error deleting template:",r),alert("Failed to delete template")}},P=s=>{try{const r={...s,id:Date.now().toString(),name:`${s.name} (Copy)`,createdAt:new Date().toISOString()},a=[...h,r];localStorage.setItem("program-templates",JSON.stringify(a)),b(a.sort((p,k)=>new Date(k.createdAt).getTime()-new Date(p.createdAt).getTime()))}catch(r){console.error("Error duplicating template:",r),alert("Failed to duplicate template")}},j=s=>{x(s.exercises)},w=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=s=>{v(s),g(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:e.jsxs("div",{className:"bg-[#23272F] rounded-lg w-full max-w-4xl h-5/6 flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Program Templates"}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Use saved templates to quickly create new programs"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx(C,{className:"w-8 h-8"})}),e.jsx("p",{className:"text-lg mb-2",children:"No templates saved yet"}),e.jsx("p",{className:"text-sm",children:"Create a program and save it as a template to see it here"})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map(s=>e.jsxs("div",{className:"bg-[#181A20] rounded-lg p-4 border border-white/10 hover:border-white/20 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium text-lg mb-1",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-400",children:[s.exercises.length," exercise",s.exercises.length!==1?"s":""]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Created ",w(s.createdAt)]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Exercises:"}),e.jsxs("div",{className:"space-y-1",children:[s.exercises.slice(0,3).map((r,a)=>e.jsxs("div",{className:"text-sm text-gray-300 truncate",children:["• ",r.exercise.name]},a)),s.exercises.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",s.exercises.length-3," more..."]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>j(s),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 flex items-center justify-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),"Use"]}),e.jsx("button",{onClick:()=>u(s),className:"px-3 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Preview"}),e.jsx("button",{onClick:()=>P(s),className:"px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:e.jsx(C,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(s.id),className:"px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:e.jsx(S,{className:"w-4 h-4"})})]})]},s.id))})}),e.jsx("div",{className:"p-6 border-t border-white/10",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:c,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})})]})}),y&&n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-60",children:e.jsxs("div",{className:"bg-[#23272F] rounded-lg w-full max-w-2xl max-h-5/6 flex flex-col shadow-xl",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:n.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[n.exercises.length," exercises • Created ",w(n.createdAt)]})]}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-white text-2xl",children:"×"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-4",children:n.exercises.map((s,r)=>e.jsxs("div",{className:"bg-[#181A20] rounded-lg p-4 border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:s.exercise.name}),e.jsx("div",{className:"space-y-2",children:s.sets.map((a,p)=>e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-gray-400 w-8",children:["#",p+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white",children:[a.weight||0,"kg"]}),e.jsx("span",{className:"text-gray-400",children:"×"}),e.jsxs("span",{className:"text-white",children:[a.reps||0," reps"]}),a.difficulty&&e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-700 text-gray-300 rounded",children:a.difficulty})]})]},p))}),s.exercise.description&&e.jsx("div",{className:"mt-3 text-sm text-gray-400",children:s.exercise.description})]},r))})}),e.jsx("div",{className:"p-6 border-t border-white/10",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Close"}),e.jsx("button",{onClick:()=>{j(n),g(!1)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Use This Template"})]})})]})})]})},V={Any:"bg-gray-500",Beginner:"bg-green-600",Intermediate:"bg-yellow-600",Advanced:"bg-red-600"},H=({onSelect:c})=>{const x=M(),{programs:h,addProgram:b,refresh:n,deleteProgram:v}=L(),[y,g]=l.useState(!1),[N,f]=l.useState(!1),[P,j]=l.useState(!1),[w,u]=l.useState(null),[s,r]=l.useState(null),a=U(),p=async t=>{u(null);const i=a.currentUser;if(!i){u("You must be logged in to create a program");return}const d={name:t.name,description:t.description||"",level:t.level.toLowerCase(),createdBy:i.uid,sessions:[],isPublic:!1,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("[ProgramList] Creating new program:",d);try{await b(d),console.log("[ProgramList] Program created successfully"),g(!1),await n();const o=h.find(m=>m.name===t.name&&m.userId===i.uid&&m.createdBy===i.uid);o?x(`/programs/${o.id}`):console.log("[ProgramList] Created program not found in list, staying on programs page")}catch(o){const m=o instanceof Error?o.message:"Failed to create program";console.error("[ProgramList] Error in handleAdd:",o),u(m)}},k=async t=>{try{console.log("[ProgramList] Creating program from builder:",t),await b(t),f(!1),await n();const i=h.find(d=>{var o,m;return d.name===t.name&&d.userId===((o=a.currentUser)==null?void 0:o.uid)&&d.createdBy===((m=a.currentUser)==null?void 0:m.uid)});i&&x(`/programs/${i.id}`)}catch(i){const d=i instanceof Error?i.message:"Failed to create program";console.error("Error creating program from builder:",i),u(d)}},T=t=>{j(!1),f(!0),console.log("Using template with exercises:",t)},A=async(t,i,d)=>{if(d.stopPropagation(),window.confirm(`Are you sure you want to delete the program "${i}"? This action cannot be undone.`)){r(t),u(null);try{console.log("[ProgramList] Deleting program:",t),await v(t),console.log("[ProgramList] Program deleted successfully"),await n()}catch(o){const m=o instanceof Error?o.message:"Failed to delete program";console.error("[ProgramList] Error deleting program:",o),u(m)}finally{r(null)}}};return e.jsxs("div",{className:"min-h-screen bg-black/90",children:[e.jsx("header",{className:"sticky top-0 bg-[#1a1a1a] border-b border-white/10 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Programs"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all duration-200 flex items-center gap-2 font-medium",children:[e.jsx(I,{className:"w-4 h-4"}),"Templates"]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2.5 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center gap-2 font-medium shadow-lg",children:[e.jsx(F,{className:"w-4 h-4"}),"Builder"]})]})]})}),e.jsxs("main",{className:"p-4",children:[w&&e.jsx("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 text-red-400 rounded-xl",children:w}),h.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gray-800/50 flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:"No programs yet"}),e.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"Create your first training program to get started"}),e.jsx("button",{onClick:()=>f(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-medium shadow-lg",children:"Create Program"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(t=>e.jsxs("div",{className:"relative bg-[#1a1a1a] rounded-2xl p-5 flex flex-col justify-between min-h-[140px] cursor-pointer overflow-hidden group border border-gray-800 hover:border-gray-700 transition-all duration-200 hover:shadow-xl",onClick:()=>c?c(t.id):x(`/programs/${t.id}`),children:[e.jsx("div",{className:"absolute right-4 top-4 opacity-10 text-4xl pointer-events-none select-none",children:e.jsx("span",{role:"img","aria-label":"kettlebell",children:"🏋️‍♂️"})}),e.jsx("button",{onClick:i=>A(t.id,t.name,i),disabled:s===t.id,className:"absolute top-3 left-3 p-2 bg-red-600/90 hover:bg-red-500 text-white rounded-xl opacity-0 group-hover:opacity-100 transition-all duration-200 z-20 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete program","aria-label":`Delete program ${t.name}`,children:s===t.id?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(S,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex flex-col justify-between h-full z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-white mb-2",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-400 mb-3 line-clamp-2",children:t.description})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium text-white ${V[t.level.charAt(0).toUpperCase()+t.level.slice(1)]||"bg-gray-700"}`,children:t.level.charAt(0).toUpperCase()+t.level.slice(1)})}),t.sessions&&t.sessions.length>0&&e.jsxs("span",{className:"text-gray-400 text-xs font-medium",children:[t.sessions.length," session",t.sessions.length!==1?"s":""]})]})]}),t.description&&e.jsx("div",{className:"text-gray-400 text-xs mt-2 z-10 line-clamp-2",children:t.description})]},t.id))}),e.jsx("button",{className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-500 text-white rounded-full w-14 h-14 flex items-center justify-center text-3xl shadow-lg z-50",onClick:()=>g(!0),"aria-label":"Add Program",children:"+"})]}),e.jsx(D,{isOpen:y,onClose:()=>{g(!1),u(null)},onSave:p}),N&&e.jsx(B,{onClose:()=>f(!1),onSave:k}),P&&e.jsx(R,{onClose:()=>j(!1),onUseTemplate:T})]})},Z=c=>e.jsx(E,{fallback:e.jsx("div",{className:"text-white p-4",children:"Error loading programs. Please try again."}),children:e.jsx(H,{...c})});export{Z as default};
//# sourceMappingURL=ProgramList-D6WBhRTq.js.map
