import{u as C,s as b,n as v,j as t,l as x,d as N}from"./index-CwklxJwA.js";import{b as h}from"./react-vendor-DQubVtpq.js";import{B as k,n as P}from"./firebase-vendor-C56ojj1e.js";import{u as E,g as F}from"./auth-D3eg-LZj.js";const B=()=>{const i=E(),{user:n,isLoading:d,isAuthenticated:m}=C(l=>l.auth);return h.useEffect(()=>{(async()=>{try{const s=await F();i(b(s))}catch{i(b(null))}finally{i(v(!1))}})()},[i]),{user:n,isLoading:d,isAuthenticated:m}},D=["Chest","Back","Shoulders","Biceps","Triceps","Legs","Core","Full Body","Cardio"],S=["Strength","Hypertrophy","Endurance","Power","Cardio","Flexibility","Balance"],T=["Beginner","Intermediate","Advanced"],I=({onClose:i,onSuccess:n})=>{const{user:d}=B(),[m,l]=h.useState(!1),[s,c]=h.useState({name:"",bodyParts:[],type:"Strength",trainingCategory:"Beginner",description:""}),[o,g]=h.useState({}),f=()=>{var r,a,u;const e={};return(r=s.name)!=null&&r.trim()?s.name.length<3&&(e.name="Name must be at least 3 characters"):e.name="Exercise name is required",(a=s.bodyParts)!=null&&a.length||(e.bodyParts="Select at least one body part"),(u=s.description)!=null&&u.trim()?s.description.length<10&&(e.description="Description must be at least 10 characters"):e.description="Description is required",g(e),Object.keys(e).length===0},p=async e=>{if(e.preventDefault(),!d){x.error("You must be logged in to create exercises");return}if(!f()){x.error("Please fill in all required fields");return}l(!0);try{const r={name:s.name.trim(),description:s.description.trim(),type:s.type==="Cardio"?"cardio":s.type==="Flexibility"?"flexibility":"strength",category:s.type==="Cardio"?"cardio":s.type==="Flexibility"?"stretching":s.bodyParts.length>1?"compound":"isolation",primaryMuscles:s.bodyParts.map(u=>u.toLowerCase().replace(/\s+/g,"_")),secondaryMuscles:[],instructions:[s.description],defaultUnit:s.type==="Cardio"?"time":"kg",metrics:{trackWeight:s.type!=="Cardio",trackReps:s.type!=="Cardio",trackTime:s.type==="Cardio",trackDistance:!1,trackRPE:!0},customExercise:!0,userId:d.id},a=await k(P(N,"exercises"),r);x.success("Exercise created successfully!"),n==null||n(a.id),i()}catch(r){console.error("Error creating exercise:",r),x.error("Failed to create exercise. Please try again.")}finally{l(!1)}},y=e=>{const r=e.target.value;c(a=>({...a,type:r}))},w=e=>{c(r=>({...r,trainingCategory:e}))},j=e=>{c(r=>({...r,bodyParts:r.bodyParts.includes(e)?r.bodyParts.filter(a=>a!==e):[...r.bodyParts,e]}))};return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:t.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-[#1a1a1a] px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:t.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-white/90",children:"Exercise Name"}),t.jsx("input",{type:"text",id:"name",required:!0,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm placeholder-white/40",value:s.name,onChange:e=>c(r=>({...r,name:e.target.value}))}),o.name&&t.jsx("p",{className:"mt-1 text-sm text-red-400",children:o.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Body Parts"}),t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:D.map(e=>t.jsx("button",{type:"button",className:`rounded-full px-3 py-1 text-sm ${s.bodyParts.includes(e)?"bg-blue-600 text-white":"bg-[#2a2a2a] text-white/70 hover:bg-[#3a3a3a]"}`,onClick:()=>j(e),children:e},e))}),o.bodyParts&&t.jsx("p",{className:"mt-1 text-sm text-red-400",children:o.bodyParts})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-white/90",children:"Exercise Type"}),t.jsx("select",{id:"type",required:!0,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:s.type,onChange:y,children:S.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-white/90",children:"Training Category"}),t.jsx("select",{id:"category",required:!0,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:s.trainingCategory,onChange:e=>w(e.target.value),children:T.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-white/90",children:"Description"}),t.jsx("textarea",{id:"description",rows:3,className:"mt-1 block w-full rounded-md border-gray-600 bg-[#2a2a2a] text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm placeholder-white/40",value:s.description,onChange:e=>c(r=>({...r,description:e.target.value}))}),o.description&&t.jsx("p",{className:"mt-1 text-sm text-red-400",children:o.description})]}),t.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3",children:[t.jsx("button",{type:"submit",disabled:m,className:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:col-start-2 sm:text-sm disabled:opacity-50",children:m?"Creating...":"Create Exercise"}),t.jsx("button",{type:"button",onClick:i,className:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:col-start-1 sm:mt-0 sm:text-sm",children:"Cancel"})]})]})})})})};export{I as C,B as u};
//# sourceMappingURL=CreateExerciseDialog-BzC3l2rX.js.map
