import{j as e,d as T}from"./index-CwklxJwA.js";import{b as x}from"./react-vendor-DQubVtpq.js";import{a as L,d as B}from"./localStorageUtils-B-xqxCNH.js";import{T as U,l as R,m as H,z as P,n as Z,x as $}from"./firebase-vendor-C56ojj1e.js";const O=x.createContext(void 0),G=()=>{const t=x.useContext(O);if(!t)throw new Error("useSupersets must be used within a SupersetProvider");return t},J="superset_data",V="exercise_order",q=t=>`${J}_${t}`,F=t=>`${V}_${t}`,W=t=>{try{const r=localStorage.getItem(q(t));return r?JSON.parse(r):[]}catch(r){return console.error("Error loading supersets from storage:",r),[]}},_=(t,r)=>{try{localStorage.setItem(q(t),JSON.stringify(r))}catch(c){console.error("Error saving supersets to storage:",c)}},A=(t,r)=>{try{localStorage.setItem(F(t),JSON.stringify(r))}catch(c){console.error("Error saving exercise order to storage:",c)}},K=t=>{try{const r=localStorage.getItem(F(t));return r?JSON.parse(r):[]}catch(r){return console.error("Error loading exercise order from storage:",r),[]}},me=({children:t})=>{const[r,c]=x.useState({isCreating:!1,selectedExercises:[],activeSuperset:null,supersets:[]}),[l,n]=x.useState(""),[s,a]=x.useState([]),m=x.useCallback(h=>{const g=W(h),v=K(h);c(j=>({...j,supersets:g})),a(v),n(h)},[]),i=x.useCallback(h=>{_(h,r.supersets),A(h,s)},[r.supersets,s]);x.useEffect(()=>{l&&_(l,r.supersets)},[r.supersets,l]),x.useEffect(()=>{l&&s.length>0&&A(l,s)},[s,l]);const p=x.useCallback(h=>{a(h),l&&A(l,h)},[l]),y=x.useCallback(()=>{c(h=>({...h,isCreating:!0,selectedExercises:[]}))},[]),b=x.useCallback(()=>{c(h=>({...h,isCreating:!1,selectedExercises:[]}))},[]),k=x.useCallback(h=>{c(g=>({...g,selectedExercises:g.selectedExercises.includes(h)?g.selectedExercises.filter(v=>v!==h):[...g.selectedExercises,h]}))},[]),w=x.useCallback(h=>{if(r.selectedExercises.length<2)return null;const g={id:crypto.randomUUID(),name:h||`Superset ${r.supersets.length+1}`,exerciseIds:r.selectedExercises,order:r.supersets.length};return c(v=>({...v,supersets:[...v.supersets,g],isCreating:!1,selectedExercises:[]})),g},[r.selectedExercises,r.supersets.length]),N=x.useCallback(h=>{c(g=>({...g,supersets:g.supersets.filter(v=>v.id!==h)}))},[]),I=x.useCallback(h=>{c(g=>({...g,supersets:[...g.supersets,h]}))},[]),C=x.useCallback(h=>{c(g=>({...g,supersets:g.supersets.filter(v=>v.id!==h)}))},[]),D=x.useCallback(h=>r.supersets.find(g=>g.exerciseIds.includes(h))||null,[r.supersets]),o=x.useCallback(h=>r.supersets.some(g=>g.exerciseIds.includes(h)),[r.supersets]),d=x.useCallback(h=>{c(g=>({...g,supersets:g.supersets.map(v=>({...v,exerciseIds:v.exerciseIds.filter(j=>j!==h)})).filter(v=>v.exerciseIds.length>1)}))},[]),E=x.useCallback((h,g)=>{c(v=>({...v,supersets:v.supersets.map(j=>j.id===h?{...j,name:g}:j)}))},[]),f=x.useCallback(()=>{c({isCreating:!1,selectedExercises:[],activeSuperset:null,supersets:[]}),a([])},[]),S={state:r,startCreating:y,cancelCreating:b,toggleExerciseSelection:k,createSuperset:w,breakSuperset:N,addSuperset:I,removeSuperset:C,getSupersetByExercise:D,isExerciseInSuperset:o,removeExerciseFromSuperset:d,clearAll:f,loadSupersetsForDate:m,saveSupersetsForDate:i,updateExerciseOrder:p,renameSuperset:E};return e.jsx(O.Provider,{value:S,children:t})},pe=async(t,r,c)=>{try{if(console.log("üìù addExerciseLog called with:",{logData:t,selectedDate:r,existingId:c}),!t.userId)throw new Error("userId is required to save exercise log");const l={...t,timestamp:U.fromDate(r||new Date),deviceId:window.navigator.userAgent,userId:t.userId,sets:Array.isArray(t.sets)?t.sets:[]};console.log("üìù Prepared exercise data:",l);let n,s;if(c){n=R(T,"users",t.userId,"exercises",c),s=c,console.log("üìù Updating existing document:",s);try{const a=R(T,"exerciseLogs",c);(await H(a)).exists()&&(await P(a),console.log("‚úÖ Cleaned up old location document:",c))}catch(a){console.warn("‚ö†Ô∏è Could not clean up old location:",a)}}else n=R(Z(T,"users",t.userId,"exercises")),s=n.id,console.log("üìù Creating new document with ID:",s);return await $(n,l),console.log("‚úÖ Exercise saved successfully with ID:",s),s}catch(l){const n=l;throw console.error("‚ùå Error adding exercise log:",{error:l,code:n.code,message:n.message,userId:t.userId}),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to add exercise log: "+(n.message||"Unknown error"))}},z=async(t,r)=>{var c,l;try{if(console.log("üóëÔ∏è deleteExerciseLog called with:",{logId:t,userId:r}),!r)throw new Error("userId is required to delete exercise log");if(!t)throw new Error("logId is required to delete exercise log");const n=R(T,"users",r,"exercises",t),s=R(T,"exerciseLogs",t);let a=null,m=null;try{a=await H(n),console.log("üìÑ New path document check:",{exists:a.exists(),userId:a.exists()?(c=a.data())==null?void 0:c.userId:null})}catch(y){console.warn("‚ö†Ô∏è Error checking new path:",y)}try{m=await H(s),console.log("üìÑ Old path document check:",{exists:m.exists(),userId:m.exists()?(l=m.data())==null?void 0:l.userId:null})}catch(y){console.warn("‚ö†Ô∏è Error checking old path:",y)}let i=!1,p=[];if(a!=null&&a.exists()){const y=a.data();if((y==null?void 0:y.userId)===r)try{await P(n),console.log("‚úÖ Exercise deleted from new location successfully"),i=!0}catch(b){console.error("‚ùå Failed to delete from new location:",b);const k=b instanceof Error?b.message:"Unknown error";p.push(`New location error: ${k}`)}else y!=null&&y.userId&&console.warn("‚ö†Ô∏è Document exists but belongs to different user:",{docUserId:y.userId,requestUserId:r})}if(!i&&(m!=null&&m.exists())){const y=m.data();if((y==null?void 0:y.userId)===r)try{await P(s),console.log("‚úÖ Exercise deleted from old location successfully"),i=!0}catch(b){console.error("‚ùå Failed to delete from old location:",b);const k=b instanceof Error?b.message:"Unknown error";p.push(`Old location error: ${k}`)}else y!=null&&y.userId&&console.warn("‚ö†Ô∏è Document exists but belongs to different user:",{docUserId:y.userId,requestUserId:r})}if(!i){const y=!a&&!m?"Could not access exercise document. Please check your permissions.":p.length>0?`Failed to delete exercise: ${p.join("; ")}`:"Exercise log not found or you do not have permission to delete it";throw new Error(y)}}catch(n){throw console.error("‚ùå Error deleting exercise log:",n),n instanceof Error?n:new Error("Failed to delete exercise log")}};var u=(t=>(t.RESISTANCE="resistance",t.SPORT="sport",t.STRETCHING="stretching",t.ENDURANCE="endurance",t.SPEED_AGILITY="speedAgility",t.OTHER="other",t))(u||{});const Y=[{name:"Barbell Back Squat",description:"A fundamental compound exercise for lower body strength",activityType:u.RESISTANCE,category:"compound",primaryMuscles:["quadriceps","glutes","hamstrings"],secondaryMuscles:["core","calves","lower_back"],equipment:["barbell","squat_rack"],instructions:["Position bar on upper back","Feet shoulder-width apart","Lower until thighs parallel to ground","Drive through heels to stand"],tips:["Keep chest up","Maintain neutral spine"],defaultUnit:"kg",isDefault:!0,metrics:{trackWeight:!0,trackReps:!0,trackRPE:!0}},{name:"Deadlift",description:"A fundamental compound exercise for posterior chain strength",activityType:u.RESISTANCE,category:"compound",primaryMuscles:["hamstrings","glutes","lower_back"],secondaryMuscles:["traps","forearms","core"],equipment:["barbell"],instructions:["Stand with feet hip-width apart","Grip bar outside legs","Keep back straight, chest up","Drive through heels and hips"],defaultUnit:"kg",isDefault:!0,metrics:{trackWeight:!0,trackReps:!0,trackRPE:!0}},{name:"Bench Press",description:"A fundamental compound exercise for upper body pushing strength",activityType:u.RESISTANCE,category:"compound",primaryMuscles:["chest","shoulders","triceps"],secondaryMuscles:["core"],equipment:["barbell","bench"],instructions:["Lie on bench with feet on floor","Grip bar slightly wider than shoulders","Lower bar to chest","Press bar up to full extension"],defaultUnit:"kg",isDefault:!0,metrics:{trackWeight:!0,trackReps:!0,trackRPE:!0}}],X=[{name:"Football Match",description:"Competitive football/soccer match",activityType:u.SPORT,category:"team_sport",sportType:"football",skillLevel:"intermediate",teamBased:!0,equipment:["football","boots","shin_guards"],primarySkills:["passing","dribbling","shooting","defending"],isDefault:!0,metrics:{trackDuration:!0,trackScore:!0,trackIntensity:!0,trackOpponent:!0,trackPerformance:!0}},{name:"Basketball Training",description:"Basketball skills practice session",activityType:u.SPORT,category:"team_sport",sportType:"basketball",skillLevel:"intermediate",teamBased:!0,equipment:["basketball","basketball_shoes"],primarySkills:["shooting","dribbling","passing","defense"],isDefault:!0,metrics:{trackDuration:!0,trackScore:!1,trackIntensity:!0,trackPerformance:!0}},{name:"Tennis Match",description:"Competitive tennis match",activityType:u.SPORT,category:"racket_sport",sportType:"tennis",skillLevel:"intermediate",teamBased:!1,equipment:["tennis_racket","tennis_balls","tennis_shoes"],primarySkills:["serve","forehand","backhand","volley"],isDefault:!0,metrics:{trackDuration:!0,trackScore:!0,trackIntensity:!0,trackOpponent:!0,trackPerformance:!0}},{name:"Swimming Training",description:"Swimming technique and endurance training",activityType:u.SPORT,category:"aquatic_sport",sportType:"swimming",skillLevel:"intermediate",teamBased:!1,equipment:["goggles","swimsuit","swim_cap"],primarySkills:["freestyle","backstroke","breaststroke","butterfly"],isDefault:!0,metrics:{trackDuration:!0,trackScore:!1,trackIntensity:!0,trackPerformance:!0}}],Q=[{name:"Hamstring Stretch",description:"Static stretch for hamstring flexibility",activityType:u.STRETCHING,category:"static",stretchType:"static",targetMuscles:["hamstrings"],bodyRegion:["legs"],difficulty:"beginner",instructions:["Sit with one leg extended","Reach forward toward toes","Hold stretch without bouncing","Feel stretch in back of thigh"],isDefault:!0,metrics:{trackDuration:!0,trackHoldTime:!0,trackIntensity:!0,trackFlexibility:!0}},{name:"Shoulder Cross-Body Stretch",description:"Static stretch for shoulder flexibility",activityType:u.STRETCHING,category:"static",stretchType:"static",targetMuscles:["shoulders","rear_deltoids"],bodyRegion:["upper_body"],difficulty:"beginner",instructions:["Pull arm across body","Use opposite hand to assist","Hold stretch gently","Feel stretch in shoulder"],isDefault:!0,metrics:{trackDuration:!0,trackHoldTime:!0,trackIntensity:!0,trackFlexibility:!0}},{name:"Leg Swings",description:"Dynamic leg mobility exercise",activityType:u.STRETCHING,category:"dynamic",stretchType:"dynamic",targetMuscles:["hip_flexors","hamstrings","glutes"],bodyRegion:["legs","hips"],difficulty:"beginner",instructions:["Hold wall or support for balance","Swing leg forward and back","Keep torso upright","Control the movement"],isDefault:!0,metrics:{trackDuration:!0,trackHoldTime:!1,trackIntensity:!0,trackFlexibility:!0}}],ee=[{name:"Outdoor Running",description:"Running outdoors for cardiovascular fitness",activityType:u.ENDURANCE,category:"running",enduranceType:"running",environment:"outdoor",intensity:"moderate",equipment:["running_shoes","fitness_tracker"],isDefault:!0,metrics:{trackDistance:!0,trackDuration:!0,trackPace:!0,trackHeartRate:!0,trackCalories:!0,trackElevation:!0}},{name:"Treadmill Running",description:"Indoor treadmill running session",activityType:u.ENDURANCE,category:"running",enduranceType:"running",environment:"indoor",intensity:"moderate",equipment:["treadmill","running_shoes"],isDefault:!0,metrics:{trackDistance:!0,trackDuration:!0,trackPace:!0,trackHeartRate:!0,trackCalories:!0}},{name:"Road Cycling",description:"Outdoor road cycling for endurance",activityType:u.ENDURANCE,category:"cycling",enduranceType:"cycling",environment:"outdoor",intensity:"moderate",equipment:["bicycle","helmet","cycling_shoes"],isDefault:!0,metrics:{trackDistance:!0,trackDuration:!0,trackPace:!0,trackHeartRate:!0,trackCalories:!0,trackElevation:!0}},{name:"Stationary Bike",description:"Indoor stationary bike session",activityType:u.ENDURANCE,category:"cycling",enduranceType:"cycling",environment:"indoor",intensity:"moderate",equipment:["stationary_bike"],isDefault:!0,metrics:{trackDistance:!0,trackDuration:!0,trackPace:!0,trackHeartRate:!0,trackCalories:!0}},{name:"Pool Swimming",description:"Swimming laps for cardiovascular fitness",activityType:u.ENDURANCE,category:"swimming",enduranceType:"swimming",environment:"indoor",intensity:"moderate",equipment:["goggles","swimsuit","swim_cap"],isDefault:!0,metrics:{trackDistance:!0,trackDuration:!0,trackPace:!0,trackHeartRate:!0,trackCalories:!0}}],te=[{name:"Meditation Session",description:"Mindfulness and meditation practice",activityType:u.OTHER,category:"wellness",customCategory:"mindfulness",customFields:[{fieldId:"duration",label:"Duration",type:"duration",required:!0,unit:"minutes"},{fieldId:"technique",label:"Meditation Technique",type:"select",required:!1,options:["mindfulness","breathing","body_scan","loving_kindness"]},{fieldId:"focus_level",label:"Focus Level",type:"number",required:!1,validation:{min:1,max:10}}],isDefault:!0,metrics:{duration:!0,technique:!0,focus_level:!0}},{name:"Physiotherapy Session",description:"Physical therapy and rehabilitation exercises",activityType:u.OTHER,category:"rehabilitation",customCategory:"therapy",customFields:[{fieldId:"duration",label:"Session Duration",type:"duration",required:!0,unit:"minutes"},{fieldId:"body_part",label:"Target Body Part",type:"select",required:!0,options:["knee","shoulder","back","ankle","wrist","hip"]},{fieldId:"pain_level_before",label:"Pain Level Before",type:"number",required:!1,validation:{min:0,max:10}},{fieldId:"pain_level_after",label:"Pain Level After",type:"number",required:!1,validation:{min:0,max:10}}],isDefault:!0,metrics:{duration:!0,body_part:!0,pain_level_before:!0,pain_level_after:!0}}];u.RESISTANCE+"",u.SPORT+"",u.STRETCHING+"",u.ENDURANCE+"",u.OTHER+"",u.SPEED_AGILITY+"";class re{async logResistanceExercise(r,c,l,n,s=new Date){const a={activityId:r,activityType:u.RESISTANCE,activityName:c,userId:n,timestamp:s,sets:l.map((i,p)=>({setNumber:p+1,weight:i.weight||0,reps:i.reps||0,rpe:i.rpe,restTime:i.restTime,notes:i.notes}))};return await this.saveActivityLog(a)}async logSportActivity(r,c,l,n,s=new Date){const a={activityId:r,activityType:u.SPORT,activityName:c,userId:n,timestamp:s,sessions:l.map((i,p)=>({sessionNumber:p+1,duration:i.duration||0,distance:i.distance,calories:i.calories,intensity:i.intensity||5,score:i.score,opponent:i.opponent,performance:i.performance||5,skills:i.skills||[],notes:i.notes}))};return await this.saveActivityLog(a)}async logStretchingExercise(r,c,l,n,s=new Date){const a={activityId:r,activityType:u.STRETCHING,activityName:c,userId:n,timestamp:s,stretches:l.map((i,p)=>({setNumber:p+1,duration:i.duration||0,holdTime:i.holdTime,intensity:i.intensity||5,flexibility:i.flexibility||5,stretchType:i.stretchType,bodyPart:i.bodyPart,notes:i.notes}))};return await this.saveActivityLog(a)}async logEnduranceExercise(r,c,l,n,s=new Date){console.log("üèÉ Logging endurance exercise with sessions:",l);const a={activityId:r,activityType:u.ENDURANCE,activityName:c,userId:n,timestamp:s,sessions:l.map((i,p)=>(console.log("üèÉ Processing endurance session:",i),{sessionNumber:p+1,distance:i.distance,duration:i.duration||0,pace:i.pace,averageHeartRate:i.averageHeartRate||i.averageHR,maxHeartRate:i.maxHeartRate||i.maxHR,calories:i.calories,elevation:i.elevation,rpe:i.rpe,hrZone1:i.hrZone1,hrZone2:i.hrZone2,hrZone3:i.hrZone3,notes:i.notes}))};return console.log("üèÉ Final endurance log data:",a),await this.saveActivityLog(a)}async logOtherActivity(r,c,l,n,s=new Date){const a={activityId:r,activityType:u.OTHER,activityName:c,userId:n,timestamp:s,customData:l.map((i,p)=>({sessionNumber:p+1,duration:i.duration,calories:i.calories,heartRate:i.heartRate,intensity:i.intensity,notes:i.notes,customValues:i.customValues||{},...i}))};return await this.saveActivityLog(a)}async logSpeedAgilityExercise(r,c,l,n,s=new Date){console.log("‚ö° Logging speed & agility exercise with sessions:",l);const a={activityId:r,activityType:u.SPEED_AGILITY,activityName:c,userId:n,timestamp:s,sessions:l.map((i,p)=>(console.log("‚ö° Processing speed & agility session:",i),{sessionNumber:p+1,reps:i.reps||0,time:i.time,distance:i.distance,height:i.height,restTime:i.restTime,rpe:i.rpe||0,notes:i.notes}))};return console.log("‚ö° Final speed & agility log data:",a),await this.saveActivityLog(a)}async saveActivityLog(r){const c=`log-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={...r,id:c},n=JSON.parse(localStorage.getItem("activity-logs")||"[]");return n.push(l),localStorage.setItem("activity-logs",JSON.stringify(n)),console.log("Activity log saved:",l),c}async getActivityLogs(r,c,l,n){let a=JSON.parse(localStorage.getItem("activity-logs")||"[]").filter(m=>m.userId===r);return c&&(a=a.filter(m=>new Date(m.timestamp)>=c)),l&&(a=a.filter(m=>new Date(m.timestamp)<=l)),n&&(a=a.filter(m=>m.activityType===n)),a.map(m=>({...m,timestamp:new Date(m.timestamp)}))}async deleteActivityLog(r,c){try{const n=JSON.parse(localStorage.getItem("activity-logs")||"[]").filter(s=>!(s.id===r&&s.userId===c));return localStorage.setItem("activity-logs",JSON.stringify(n)),!0}catch(l){return console.error("Error deleting activity log:",l),!1}}}const M=new re,se=t=>{if(!t)return"var(--color-normal)";switch(t){case"WARMUP":return"var(--color-warmup)";case"EASY":return"var(--color-easy)";case"MODERATE":return"var(--color-moderate)";case"HARD":return"var(--color-hard)";default:return"var(--color-moderate)"}},he=({exercise:t,onEdit:r,onDelete:c,showActions:l=!0,exerciseNumber:n,subNumber:s})=>{const[a,m]=x.useState(!1),i=x.useRef(null),{state:p,toggleExerciseSelection:y,isExerciseInSuperset:b,startCreating:k}=G(),w=b(t.id||""),N=p.selectedExercises.includes(t.id||"");x.useEffect(()=>{const o=d=>{i.current&&!i.current.contains(d.target)&&m(!1)};return a&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[a]);const I=()=>{t.id&&y(t.id)},C=()=>t.sets.reduce((o,d)=>o+d.weight*d.reps,0),D=`bg-[#1a1a1a] rounded-lg p-3 transition-all duration-200 ${w?"bg-[#2196F3]/5":N?"bg-[#8B5CF6]/10 border-l-2 border-[#8B5CF6]":"hover:bg-black/20"}`;return e.jsxs("div",{className:D,children:[p.isCreating&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:I,className:"w-4 h-4 text-[#8B5CF6] bg-gray-100 border-gray-300 rounded focus:ring-[#8B5CF6] focus:ring-2"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Select for superset"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsxs("div",{className:"flex items-center justify-center min-w-6 h-6 bg-[#8B5CF6] text-white text-xs font-bold rounded-full px-1.5",children:[n,s?String.fromCharCode(96+s):""]}),e.jsx("h3",{className:"text-base font-medium text-white",children:t.exerciseName})]}),l&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{w||(p.isCreating?I():(k(),t.id&&setTimeout(()=>{y(t.id||"")},50)))},className:`p-2 rounded-lg transition-colors ${w?"bg-[#2196F3] text-white":N?"bg-[#8B5CF6] text-white":"hover:bg-white/10 text-gray-400 hover:text-white"}`,"aria-label":w?"In superset":N?"Selected for superset":"Add to superset",children:w?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.1a3 3 0 004.24-4.24l-1.1-1.102z"})}):N?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),r&&e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-lg transition-colors","aria-label":"Edit exercise",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c&&e.jsx("button",{onClick:c,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-red-500","aria-label":"Delete exercise",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m4-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsx("div",{className:"mt-3",children:t.activityType&&t.activityType!=="resistance"?e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("span",{className:"px-2 py-1 bg-blue-600/20 text-blue-300 text-xs rounded-full",children:[t.activityType.charAt(0).toUpperCase()+t.activityType.slice(1)," Activity"]})}),t.sets&&t.sets.length>0&&(()=>{const o=t.sets[0],d=E=>E!=null&&E!==""&&!(typeof E=="string"&&E.trim()==="")&&!(typeof E=="number"&&isNaN(E));return e.jsxs("div",{className:"space-y-1",children:[d(o.duration)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Duration:"}),e.jsxs("span",{className:"text-white",children:[o.duration," min"]})]}),d(o.distance)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Distance:"}),e.jsxs("span",{className:"text-white",children:[o.distance," m"]})]}),d(o.calories)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Calories:"}),e.jsxs("span",{className:"text-white",children:[o.calories," kcal"]})]}),d(o.heartRate)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Heart Rate:"}),e.jsxs("span",{className:"text-white",children:[o.heartRate," bpm"]})]}),d(o.intensity)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Intensity:"}),e.jsxs("span",{className:"text-white",children:[o.intensity,"/10"]})]}),d(o.score)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Score:"}),e.jsx("span",{className:"text-white",children:o.score})]}),d(o.opponent)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Opponent:"}),e.jsx("span",{className:"text-white",children:o.opponent})]}),d(o.pace)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Pace:"}),e.jsx("span",{className:"text-white",children:o.pace})]}),d(o.holdTime)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Hold Time:"}),e.jsxs("span",{className:"text-white",children:[o.holdTime,"s"]})]}),d(o.rpe)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"RPE:"}),e.jsxs("span",{className:"text-white",children:[o.rpe,"/10"]})]}),d(o.restTime)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Rest Time:"}),e.jsxs("span",{className:"text-white",children:[o.restTime,"s"]})]}),d(o.stretchType)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Stretch Type:"}),e.jsx("span",{className:"text-white capitalize",children:o.stretchType})]}),d(o.bodyPart)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Body Part:"}),e.jsx("span",{className:"text-white",children:o.bodyPart})]}),d(o.flexibility)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Flexibility:"}),e.jsxs("span",{className:"text-white",children:[o.flexibility,"/10"]})]}),d(o.averageHeartRate)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Avg HR:"}),e.jsxs("span",{className:"text-white",children:[o.averageHeartRate," bpm"]})]}),d(o.maxHeartRate)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Max HR:"}),e.jsxs("span",{className:"text-white",children:[o.maxHeartRate," bpm"]})]}),d(o.elevation)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Elevation:"}),e.jsxs("span",{className:"text-white",children:[o.elevation," m"]})]}),d(o.performance)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Performance:"}),e.jsxs("span",{className:"text-white",children:[o.performance,"/10"]})]}),d(o.hrZone1)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Zone 1:"}),e.jsxs("span",{className:"text-white",children:[o.hrZone1," min"]})]}),d(o.hrZone2)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Zone 2:"}),e.jsxs("span",{className:"text-white",children:[o.hrZone2," min"]})]}),d(o.hrZone3)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Zone 3:"}),e.jsxs("span",{className:"text-white",children:[o.hrZone3," min"]})]}),d(o.notes)&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Notes: "}),e.jsx("span",{className:"text-white text-xs",children:o.notes})]})]})})()]}):"sets"in t&&t.sets?e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"flex flex-wrap items-center mb-2",children:t.sets.map((o,d)=>e.jsxs("div",{className:"flex items-center",style:{marginRight:d===t.sets.length-1?0:8},children:[e.jsxs("span",{className:"font-medium whitespace-nowrap",style:{color:se(o.difficulty)},children:[o.weight,"kg ",o.reps,"r"]}),d<t.sets.length-1&&e.jsx("span",{className:"text-gray-500 mx-1",children:"|"})]},d))}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Volume"}),e.jsxs("span",{className:"text-white",children:[C(),"kg"]})]}),(()=>{const o=f=>f!=null&&f!==""&&!(typeof f=="string"&&f.trim()==="")&&!(typeof f=="number"&&isNaN(f)),d=[];return t.sets.forEach(f=>{o(f.rpe)&&d.push({label:"RPE",value:`${f.rpe}/10`}),o(f.restTime)&&d.push({label:"Rest Time",value:`${f.restTime}s`}),o(f.notes)&&d.push({label:"Notes",value:f.notes})}),d.filter((f,S,h)=>S===h.findIndex(g=>g.label===f.label)).map((f,S)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:f.label}),e.jsx("span",{className:"text-white",children:f.value})]},S))})()]})]}):e.jsx("div",{className:"text-sm text-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Type"}),e.jsx("span",{className:"text-white capitalize",children:t.activityType||"Exercise"})]})})})]})};function ae(t){var c,l;console.log("üîÑ Converting activity log:",{activityType:t.activityType,activityName:t.activityName,rawLog:t});const r={id:t.id,exerciseName:t.activityName,timestamp:t.timestamp,userId:t.userId,sets:[],activityType:t.activityType,activityData:t};if(t.activityType===u.RESISTANCE)r.sets=t.sessions||[];else if(t.activityType===u.SPORT){const n=t;r.sets=((c=n.sessions)==null?void 0:c.map((s,a)=>({setNumber:a+1,duration:s.duration,distance:s.distance,calories:s.calories,intensity:s.intensity,score:s.score,notes:s.notes,...s.opponent&&{opponent:s.opponent},...s.performance&&{performance:s.performance},...s.skills&&{skills:s.skills}})))||[]}else if(t.activityType===u.STRETCHING){const n=t,s=n.stretches||n.sessions||[];r.sets=s.map((a,m)=>({setNumber:m+1,duration:a.duration,intensity:a.intensity,notes:a.notes,...a.holdTime&&{holdTime:a.holdTime},...a.flexibility&&{flexibility:a.flexibility},...a.stretchType&&{stretchType:a.stretchType},...a.bodyPart&&{bodyPart:a.bodyPart}}))||[]}else if(t.activityType===u.ENDURANCE){const n=t;r.sets=((l=n.sessions)==null?void 0:l.map((s,a)=>({setNumber:a+1,duration:s.duration,...s.distance&&{distance:s.distance},...s.pace&&{pace:s.pace},...s.averageHeartRate&&{averageHeartRate:s.averageHeartRate},...s.averageHR&&{averageHeartRate:s.averageHR},...s.maxHeartRate&&{maxHeartRate:s.maxHeartRate},...s.maxHR&&{maxHeartRate:s.maxHR},...s.calories&&{calories:s.calories},...s.elevation&&{elevation:s.elevation},...s.rpe&&{rpe:s.rpe},...s.hrZone1&&{hrZone1:s.hrZone1},...s.hrZone2&&{hrZone2:s.hrZone2},...s.hrZone3&&{hrZone3:s.hrZone3},notes:s.notes})))||[]}else if(t.activityType===u.OTHER){const n=t,s=n.customData||n.sessions||[];r.sets=s.map((a,m)=>({setNumber:m+1,duration:a.duration,...a.calories&&{calories:a.calories},...a.heartRate&&{heartRate:a.heartRate},...a.intensity&&{intensity:a.intensity},notes:a.notes,...a.customValues&&a.customValues,...Object.keys(a).reduce((i,p)=>(["sessionNumber","duration","calories","heartRate","intensity","notes","customValues"].includes(p)||(i[p]=a[p]),i),{})}))||[]}return console.log("‚úÖ Converted data result:",{id:r.id,exerciseName:r.exerciseName,activityType:r.activityType,sets:r.sets,firstSet:r.sets[0]}),r}async function ie(t,r){try{const l=L(t).map(p=>({id:p.id,exerciseName:p.exerciseName,timestamp:p.timestamp||t,userId:p.userId||r,sets:p.sets||[],deviceId:p.deviceId,activityType:u.RESISTANCE})),n=new Date(t);n.setHours(0,0,0,0);const s=new Date(t);s.setHours(23,59,59,999);const m=(await M.getActivityLogs(r,n,s)).map(ae);return[...l,...m].sort((p,y)=>{var w,N;const b=((w=p.timestamp)==null?void 0:w.getTime())||0,k=((N=y.timestamp)==null?void 0:N.getTime())||0;return b-k})}catch(c){return console.error("Error getting all exercises by date:",c),L(t).map(n=>({id:n.id,exerciseName:n.exerciseName,timestamp:n.timestamp||t,userId:n.userId||r,sets:n.sets||[],deviceId:n.deviceId,activityType:u.RESISTANCE}))}}async function ne(t,r){try{if(t.activityType&&t.activityType!==u.RESISTANCE){const l=JSON.parse(localStorage.getItem("activity-logs")||"[]").filter(n=>!(n.id===t.id&&n.userId===r));return localStorage.setItem("activity-logs",JSON.stringify(l)),console.log("Activity log deleted:",t.id),!0}else return t.id?(await z(t.id,r),!0):(B(t.exerciseName),!0)}catch(c){return console.error("Error deleting exercise:",c),!1}}async function ce(t,r){try{await M.deleteActivityLog(t,r),console.log("‚úÖ Activity log deleted successfully:",t)}catch(c){throw console.error("‚ùå Error deleting activity log:",c),c}}const ge=Object.freeze(Object.defineProperty({__proto__:null,deleteActivityLog:ce,deleteExercise:ne,getAllExercisesByDate:ie},Symbol.toStringTag,{value:"Module"}));export{u as A,he as E,me as S,M as a,pe as b,ge as c,ne as d,ie as g,G as u};
//# sourceMappingURL=unifiedExerciseUtils-_WvBlEod.js.map
