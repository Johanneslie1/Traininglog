import{j as s,u as b}from"./index-hOws252K.js";import{d as v,b as g}from"./react-vendor-DQubVtpq.js";import{E as j,P as y}from"./ProgramModal-BEk9LwsT.js";import{j as w}from"./firebase-vendor-D8cnFtZG.js";const P={Any:"bg-gray-500",Beginner:"bg-green-600",Intermediate:"bg-yellow-600",Advanced:"bg-red-600"},N=({onSelect:o})=>{const m=v(),{programs:l,addProgram:u,refresh:i}=b(),[p,c]=g.useState(!1),[x,t]=g.useState(null),d=w();g.useEffect(()=>{if(d.currentUser)try{i()}catch(e){console.error("Error refreshing programs:",e),t("Failed to load programs")}},[d.currentUser,i]);const f=async e=>{t(null);const n=d.currentUser;if(!n){t("You must be logged in to create a program");return}const h={name:e.name,description:e.description||"",level:e.level.toLowerCase(),createdBy:n.uid,sessions:[],isPublic:!1,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("[ProgramList] Creating new program:",h);try{await u(h),console.log("[ProgramList] Program created successfully"),c(!1),await i();const r=l.find(a=>a.name===e.name&&a.userId===n.uid&&a.createdBy===n.uid);r?m(`/programs/${r.id}`):console.log("[ProgramList] Created program not found in list, staying on programs page")}catch(r){const a=r instanceof Error?r.message:"Failed to create program";console.error("[ProgramList] Error in handleAdd:",r),t(a)}};return s.jsxs("div",{className:"relative min-h-screen pb-20",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Programs"}),x&&s.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:x}),l.length===0?s.jsx("div",{className:"text-center p-8 text-gray-500",children:"No programs found. Click the + button to create one."}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:l.map(e=>s.jsxs("div",{className:"relative bg-[#23272F] rounded-xl p-4 flex flex-col items-start justify-between min-h-[120px] shadow-md cursor-pointer overflow-hidden",onClick:()=>o?o(e.id):m(`/programs/${e.id}`),children:[s.jsx("div",{className:"absolute right-3 top-3 opacity-20 text-5xl pointer-events-none select-none",children:s.jsx("span",{role:"img","aria-label":"kettlebell",children:"🏋️‍♂️"})}),s.jsx("div",{className:"font-semibold text-lg text-white mb-1 z-10",children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 z-10",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs text-white ${P[e.level.charAt(0).toUpperCase()+e.level.slice(1)]||"bg-gray-700"}`,children:e.level.charAt(0).toUpperCase()+e.level.slice(1)}),e.sessions&&e.sessions.length>0&&s.jsxs("span",{className:"text-gray-400 text-xs",children:[e.sessions.length," session",e.sessions.length!==1?"s":""]})]}),e.description&&s.jsx("div",{className:"text-gray-400 text-xs mt-2 z-10 line-clamp-2",children:e.description})]},e.id))}),s.jsx("button",{className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-500 text-white rounded-full w-14 h-14 flex items-center justify-center text-3xl shadow-lg z-50",onClick:()=>c(!0),"aria-label":"Add Program",children:"+"}),s.jsx(y,{isOpen:p,onClose:()=>{c(!1),t(null)},onSave:f})]})},S=o=>s.jsx(j,{fallback:s.jsx("div",{className:"text-white p-4",children:"Error loading programs. Please try again."}),children:s.jsx(N,{...o})});export{S as default};
//# sourceMappingURL=ProgramList-Bz80hfhv.js.map
