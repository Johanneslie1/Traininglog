import{j as e,d as oe,l as le,u as ne,a as _}from"./index-CwklxJwA.js";import{b as c}from"./react-vendor-DQubVtpq.js";import{a as ce,i as ie,d as de,D as P,P as me,C as he,E as ue,b as xe,S as ge,c as U}from"./ExerciseHistoryPicker-BOb1YIKN.js";import{n as pe,q as be,o as fe,t as we}from"./firebase-vendor-C56ojj1e.js";import{u as je}from"./CreateExerciseDialog-BzC3l2rX.js";function ve(g,j){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:j},g),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"}))}const ye=c.forwardRef(ve);function Ne(g,j){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:j},g),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}))}const Ce=c.forwardRef(Ne);function ke(g,j){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:j},g),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"}))}const H=c.forwardRef(ke);function Se(g,j){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:j},g),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))}const Ee=c.forwardRef(Se);function Le(g,j){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:j},g),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const Be=c.forwardRef(Le),O=g=>({chest:"chest",pectorals:"chest",back:"back",lats:"lats",traps:"traps",shoulders:"shoulders",deltoids:"shoulders",biceps:"biceps",triceps:"triceps",forearms:"forearms",legs:"quadriceps",quadriceps:"quadriceps",hamstrings:"hamstrings",calves:"calves",glutes:"glutes",core:"core",abs:"core",abdominals:"core","lower back":"lower_back","full body":"full_body"})[g.toLowerCase()]||"full_body",Me=({onClose:g,onSelectExercises:j})=>{const{user:l}=je(),[k,R]=c.useState(""),[N,u]=c.useState(""),[T,$]=c.useState(!1),[m,L]=c.useState([]),[v,p]=c.useState([]),[b,D]=c.useState(new Set),z=[{id:"",name:"All",icon:"ðŸ’ª"},{id:"chest",name:"Chest",icon:"ðŸ«€"},{id:"back",name:"Back",icon:"ðŸ”™"},{id:"legs",name:"Legs",icon:"ðŸ¦µ"},{id:"shoulders",name:"Shoulders",icon:"ðŸ’ª"},{id:"arms",name:"Arms",icon:"ðŸ’ª"},{id:"core",name:"Core",icon:"ðŸŽ¯"}];c.useEffect(()=>{(async()=>{if(l)try{$(!0);const a=pe(oe,"exercises"),h=be(a,fe("userId","==",l.id)),C=await we(h),F=[];C.forEach(E=>{const B=E.data();F.push({...B,id:E.id,primaryMuscles:B.primaryMuscles.map(O),type:B.type,category:B.category,defaultUnit:B.defaultUnit})}),L(F)}catch(a){console.error("Error loading custom exercises:",a),le.error("Failed to load custom exercises")}finally{$(!1)}})()},[l]),c.useEffect(()=>{const i=[...ce.map(a=>({...a,id:`default-${a.name.replace(/\s+/g,"-").toLowerCase()}`,primaryMuscles:(a.primaryMuscles||[]).map(O),secondaryMuscles:[],customExercise:!1})),...ie.map(a=>({...a,id:a.id||`imported-${a.name.replace(/\s+/g,"-").toLowerCase()}`,primaryMuscles:Array.isArray(a.primaryMuscles)?a.primaryMuscles.map(O):[O(String(a.primaryMuscles))],secondaryMuscles:[],instructions:[a.description||""],defaultUnit:a.type==="cardio"?"time":"kg",metrics:{trackWeight:a.type!=="cardio",trackReps:a.type!=="cardio",trackTime:a.type==="cardio",trackDistance:!1,trackRPE:!0},customExercise:!1}))];p([...i,...m])},[m]);const M=v.filter(i=>{const a=i.primaryMuscles||[],h=k===""||i.name.toLowerCase().includes(k.toLowerCase())||a.some(C=>C.toLowerCase().includes(k.toLowerCase()));if(!N)return h;switch(N){case"chest":return h&&a.includes("chest");case"back":return h&&a.some(C=>["back","lats","traps"].includes(C));case"legs":return h&&a.some(C=>["quadriceps","hamstrings","calves","glutes"].includes(C));case"shoulders":return h&&a.includes("shoulders");case"arms":return h&&a.some(C=>["biceps","triceps","forearms"].includes(C));case"core":return h&&a.includes("core");default:return h}}),S=i=>{const a=new Set(b);a.has(i.id)?a.delete(i.id):a.add(i.id),D(a)},W=()=>{const a=M.filter(h=>b.has(h.id)).map(h=>({exercise:h,sets:[{reps:8,weight:0,difficulty:P.NORMAL},{reps:8,weight:0,difficulty:P.NORMAL},{reps:8,weight:0,difficulty:P.NORMAL}]}));j(a),g()};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:e.jsxs("div",{className:"bg-[#23272F] rounded-lg w-full max-w-4xl h-5/6 flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Exercise Database"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white text-2xl",children:e.jsx(Be,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search exercises...",value:k,onChange:i=>R(i.target.value),className:"w-full pl-10 pr-4 py-2 bg-[#181A20] text-white rounded-lg border border-white/10 focus:border-blue-500 focus:outline-none"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(i=>e.jsxs("button",{onClick:()=>u(i.id),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${N===i.id?"bg-blue-600 text-white":"bg-[#181A20] text-gray-300 hover:bg-gray-600"}`,children:[i.icon," ",i.name]},i.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:T?e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-400/30 border-t-blue-400 rounded-full mx-auto mb-4"}),"Loading exercises..."]}):M.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsx("p",{className:"text-lg mb-2",children:"No exercises found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or category filter"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(i=>e.jsxs("div",{onClick:()=>S(i),className:`p-4 rounded-lg border cursor-pointer transition-all ${b.has(i.id)?"bg-blue-600/20 border-blue-500":"bg-[#181A20] border-white/10 hover:border-white/20"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-white font-medium text-sm leading-tight",children:i.name}),b.has(i.id)&&e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 ml-2",children:e.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:(i.primaryMuscles||[]).slice(0,2).map((a,h)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-700 text-gray-300 rounded",children:a},h))}),e.jsxs("div",{className:"text-xs text-gray-400",children:[i.type," â€¢ ",i.category]})]},i.id))})}),e.jsx("div",{className:"p-6 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-gray-400 text-sm",children:[b.size," exercise",b.size!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:g,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{onClick:W,disabled:b.size===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["Add Selected (",b.size,")"]})]})]})})]})})},Ae=[{id:"programs",name:"Add from Program",icon:"ðŸ“‹",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-purple-600",textColor:"text-white"},{id:"copyPrevious",name:"Copy from Previous",icon:"ðŸ“",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-blue-600",textColor:"text-white"},{id:"history",name:"From History",icon:"ðŸ•’",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-green-600",textColor:"text-white"},{id:"database",name:"Exercise Database",icon:"ðŸ—„ï¸",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-orange-600",textColor:"text-white"}],De=[{id:"chest",name:"Chest",icon:"ðŸ’ª",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-green-600",textColor:"text-white"},{id:"back",name:"Back",icon:"ðŸ”™",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-blue-600",textColor:"text-white"},{id:"legs",name:"Legs",icon:"ðŸ¦µ",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-yellow-600",textColor:"text-white"},{id:"shoulders",name:"Shoulders",icon:"ðŸŽ¯",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-cyan-600",textColor:"text-white"},{id:"arms",name:"Arms",icon:"ðŸ’ª",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-red-600",textColor:"text-white"},{id:"core",name:"Core",icon:"â­•",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-purple-600",textColor:"text-white"},{id:"fullBody",name:"Full-Body",icon:"ðŸ‘¤",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-orange-600",textColor:"text-white"}],Fe=[{id:"cardio",name:"Cardio",icon:"ðŸƒ",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-red-600",textColor:"text-white"},{id:"agility",name:"Agility",icon:"âš¡",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-yellow-600",textColor:"text-white"},{id:"speed",name:"Speed",icon:"ðŸƒâ€â™‚ï¸",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-blue-600",textColor:"text-white"},{id:"stretching",name:"Stretching",icon:"ðŸ§˜â€â™‚ï¸",bgColor:"bg-[#2a2a2a]",iconBgColor:"bg-green-600",textColor:"text-white"}],Re=({onClose:g,onSave:j,initialSession:l,sessionName:k=""})=>{var V;const R=ne(s=>s.auth.user),[N,u]=c.useState("main"),[T,$]=c.useState(null),[m,L]=c.useState(null),[v,p]=c.useState(((V=l==null?void 0:l.exercises)==null?void 0:V.map(s=>({exercise:{id:s.id,name:s.name,type:"strength",category:"compound",primaryMuscles:[],secondaryMuscles:[],instructions:[],description:s.notes||"",defaultUnit:"kg",metrics:{trackWeight:!0,trackReps:!0}},sets:s.setsData||[]})))||[]),[b,D]=c.useState((l==null?void 0:l.name)||k),[z,M]=c.useState((l==null?void 0:l.notes)||""),[S,W]=c.useState(null),[i,a]=c.useState({weight:"",reps:""}),[h,C]=c.useState(null),[F,E]=c.useState(""),B=s=>{p(r=>[...r,...s]),u("main")},t=s=>{p(r=>[...r,...s]),u("main")},x=s=>{p(r=>[...r,...s]),u("main")},d=s=>{p(r=>[...r,...s]),u("main")},w=s=>{switch($(s),s.id){case"programs":u("programPicker");break;case"copyPrevious":u("copyPrevious");break;case"history":u("history");break;case"database":u("database");break;default:u("search");break}},f=s=>{L({...s,id:`temp-${s.name.toLowerCase().replace(/\s+/g,"-")}`,description:s.description||"",primaryMuscles:[],secondaryMuscles:[],instructions:[],metrics:{trackWeight:!0,trackReps:!0},defaultUnit:"kg"}),u("setEditor")},G=async s=>{if(!m)return;const r={exercise:m,sets:[s]};p(n=>[...n,r]),L(null),u("main")},J=s=>{p(r=>r.filter((n,o)=>o!==s))},q=(s,r)=>{const n=Array.from(v);r==="up"&&s>0?[n[s-1],n[s]]=[n[s],n[s-1]]:r==="down"&&s<v.length-1&&([n[s],n[s+1]]=[n[s+1],n[s]]),p(n)},X=(s,r)=>{var o,y;const n=v[s].sets[r];a({weight:((o=n.weight)==null?void 0:o.toString())||"",reps:((y=n.reps)==null?void 0:y.toString())||""}),W({exerciseIndex:s,setIndex:r})},Q=()=>{if(S){const{exerciseIndex:s,setIndex:r}=S;p(n=>{const o=[...n];return o[s]={...o[s],sets:o[s].sets.map((y,A)=>A===r?{...y,weight:parseFloat(i.weight)||0,reps:parseInt(i.reps)||0}:y)},o}),W(null),a({weight:"",reps:""})}},Y=()=>{W(null),a({weight:"",reps:""})},K=s=>{p(r=>{const n=[...r],o=n[s].sets[n[s].sets.length-1];return n[s]={...n[s],sets:[...n[s].sets,{reps:(o==null?void 0:o.reps)||8,weight:(o==null?void 0:o.weight)||0,difficulty:P.NORMAL}]},n})},Z=(s,r)=>{p(n=>{const o=[...n];return o[s].sets.length>1&&(o[s]={...o[s],sets:o[s].sets.filter((y,A)=>A!==r)}),o})},I=s=>{E(v[s].exercise.name),C(s)},ee=()=>{if(!F.trim()){alert("Exercise name cannot be empty");return}h!==null&&(p(s=>{const r=[...s];return r[h]={...r[h],exercise:{...r[h].exercise,name:F.trim()}},r}),C(null),E(""))},se=()=>{C(null),E("")},te=s=>{const r=v[s],n={...r,exercise:{...r.exercise,id:`${r.exercise.id}-duplicate-${Date.now()}`,name:`${r.exercise.name} (Copy)`}};p(o=>[...o.slice(0,s+1),n,...o.slice(s+1)])},re=()=>{if(!b.trim()){alert("Please enter a session name");return}if(v.length===0){alert("Please add at least one exercise");return}const s=v.filter(o=>{var y;return!((y=o.exercise.name)!=null&&y.trim())});if(s.length>0){alert(`Please ensure all exercises have names. Found ${s.length} exercise(s) without names.`);return}const r=v.map((o,y)=>({id:`${o.exercise.id}-${y}`,name:o.exercise.name,order:y,sets:o.sets.length,reps:o.sets.reduce((A,ae)=>A+(ae.reps||0),0),setsData:o.sets,notes:o.exercise.description||""})),n={id:(l==null?void 0:l.id)||"",name:b.trim(),exercises:r,notes:z.trim()};j(n)};return N==="programPicker"?e.jsx(me,{onClose:()=>u("main"),onSelectExercises:t}):N==="copyPrevious"?e.jsx(he,{isOpen:!0,onClose:()=>u("main"),onExercisesSelected:s=>{const r=s.map(n=>{var o;return{exercise:{id:n.id||`temp-${(o=n.exerciseName)==null?void 0:o.toLowerCase().replace(/\s+/g,"-")}`,name:n.exerciseName||"",type:"strength",category:"compound",primaryMuscles:[],secondaryMuscles:[],instructions:[],description:"",defaultUnit:"kg",metrics:{trackWeight:!0,trackReps:!0}},sets:n.sets||[]}});d(r)},currentDate:new Date,userId:(R==null?void 0:R.id)||""}):N==="history"?e.jsx(ue,{onClose:()=>u("main"),onSelectExercises:B}):N==="database"?e.jsx(Me,{onClose:()=>u("main"),onSelectExercises:x}):N==="search"?e.jsx(xe,{onClose:()=>u("main"),category:T,onSelectExercise:f}):N==="setEditor"&&m?e.jsx(ge,{onClose:()=>{L(null),u("main")},onSave:G,exerciseName:m.name,setNumber:1,totalSets:1}):N==="exerciseSelection"?e.jsxs("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex flex-col z-50",children:[e.jsxs("header",{className:"sticky top-0 flex items-center justify-between p-4 bg-[#1a1a1a] border-b border-white/10",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Add Exercises"}),e.jsx("button",{onClick:()=>u("main"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white","aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto overscroll-contain pb-safe min-h-0",children:e.jsxs("div",{className:"max-w-md mx-auto p-4 space-y-6 md:space-y-8",children:[e.jsxs("section",{className:"space-y-3 md:space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white/90",children:"Quick Add"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:Ae.map(s=>e.jsx(U,{category:s,onClick:()=>w(s)},s.id))})]}),e.jsxs("section",{className:"space-y-3 md:space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white/90",children:"Muscle Groups"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:gap-4",children:De.map(s=>e.jsx(U,{category:s,onClick:()=>w(s)},s.id))})]}),e.jsxs("section",{className:"space-y-3 md:space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white/90",children:"Training Types"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:gap-4",children:Fe.map(s=>e.jsx(U,{category:s,onClick:()=>w(s)},s.id))})]})]})})]}):e.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[e.jsxs("header",{className:"flex items-center justify-between px-4 py-4 bg-black/95 backdrop-blur-sm border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors",onClick:g,"aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h1",{className:"text-white text-xl font-medium",children:"Session Builder"})]}),e.jsx("button",{onClick:re,className:"px-4 py-2 bg-[#8B5CF6] hover:bg-[#7C3AED] text-white rounded-lg transition-colors font-medium",children:"Save Session"})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Name"}),e.jsx("input",{type:"text",value:b,onChange:s=>D(s.target.value),placeholder:"Enter session name",className:"w-full px-3 py-2 bg-[#2a2a2a] border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-[#8B5CF6]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Notes (Optional)"}),e.jsx("textarea",{value:z,onChange:s=>M(s.target.value),placeholder:"Add notes about this session",className:"w-full px-3 py-2 bg-[#2a2a2a] border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-[#8B5CF6] resize-none",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Exercises (",v.length,")"]}),e.jsx("button",{onClick:()=>u("exerciseSelection"),className:"px-4 py-2 bg-[#2a2a2a] hover:bg-[#3a3a3a] text-white rounded-lg transition-colors border border-white/10",children:"Add Exercise"})]}),v.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-[#2a2a2a] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsx("p",{className:"text-lg mb-2",children:"No exercises added yet"}),e.jsx("p",{className:"text-sm mb-4",children:"Add exercises from your history, programs, or the database"}),e.jsx("button",{onClick:()=>u("exerciseSelection"),className:"px-6 py-3 bg-[#8B5CF6] hover:bg-[#7C3AED] text-white rounded-lg transition-colors",children:"Add First Exercise"})]}):e.jsx("div",{className:"space-y-3",children:v.map((s,r)=>e.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl border border-white/10 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex-1",children:h===r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:F,onChange:n=>E(n.target.value),className:"flex-1 px-2 py-1 bg-[#2a2a2a] border border-white/10 rounded text-white text-lg font-medium focus:outline-none focus:border-[#8B5CF6]",autoFocus:!0}),e.jsx("button",{onClick:ee,className:"p-1 hover:bg-white/10 rounded text-green-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:se,className:"p-1 hover:bg-white/10 rounded text-red-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{onClick:()=>I(r),className:"text-left hover:bg-white/5 rounded p-1 -m-1 transition-colors",children:e.jsx("h3",{className:"text-lg font-medium text-white",children:s.exercise.name})})}),e.jsxs("div",{className:"flex items-center gap-1",children:[r>0&&e.jsx("button",{onClick:()=>q(r,"up"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",title:"Move up",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),r<v.length-1&&e.jsx("button",{onClick:()=>q(r,"down"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",title:"Move down",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),e.jsx("button",{onClick:()=>te(r),className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",title:"Duplicate exercise",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("button",{onClick:()=>J(r),className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-red-400",title:"Remove exercise",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300",children:["Sets (",s.sets.length,")"]}),e.jsx("button",{onClick:()=>K(r),className:"px-3 py-1 bg-[#2a2a2a] hover:bg-[#3a3a3a] text-white rounded-lg transition-colors text-sm border border-white/10",children:"Add Set"})]}),s.sets.map((n,o)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#2a2a2a] rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-400 w-8",children:["#",o+1]}),(S==null?void 0:S.exerciseIndex)===r&&(S==null?void 0:S.setIndex)===o?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",value:i.weight,onChange:y=>a(A=>({...A,weight:y.target.value})),placeholder:"Weight",className:"flex-1 px-2 py-1 bg-[#1a1a1a] border border-white/10 rounded text-white text-sm focus:outline-none focus:border-[#8B5CF6]"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"kg"}),e.jsx("span",{className:"text-gray-400",children:"Ã—"}),e.jsx("input",{type:"number",value:i.reps,onChange:y=>a(A=>({...A,reps:y.target.value})),placeholder:"Reps",className:"flex-1 px-2 py-1 bg-[#1a1a1a] border border-white/10 rounded text-white text-sm focus:outline-none focus:border-[#8B5CF6]"}),e.jsx("button",{onClick:Q,className:"p-1 hover:bg-white/10 rounded text-green-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:Y,className:"p-1 hover:bg-white/10 rounded text-red-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>X(r,o),className:"flex-1 text-left hover:bg-white/5 rounded p-1 -m-1 transition-colors",children:[e.jsxs("span",{className:"text-white font-medium",children:[n.weight||0," kg"]}),e.jsx("span",{className:"text-gray-400 mx-2",children:"Ã—"}),e.jsxs("span",{className:"text-white font-medium",children:[n.reps||0," reps"]})]}),s.sets.length>1&&e.jsx("button",{onClick:()=>Z(r,o),className:"p-1 hover:bg-white/10 rounded text-red-400",title:"Remove set",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},`${s.exercise.id}-set-${o}`))]})]},`${s.exercise.id}-${r}`))})]})]})]})},Pe=({onClose:g,onSave:j,initialProgram:l})=>{const[k,R]=c.useState((l==null?void 0:l.name)||""),[N,u]=c.useState((l==null?void 0:l.description)||""),[T,$]=c.useState((l==null?void 0:l.level)||"beginner"),[m,L]=c.useState((l==null?void 0:l.sessions)||[]),[v,p]=c.useState(!1),[b,D]=c.useState(null),[z,M]=c.useState(!1),S=()=>{D(null),p(!0)},W=t=>{D(t),p(!0)},i=t=>{const x=_.currentUser;if(!x)return;const d={...t,userId:x.uid};console.log("[ProgramBuilder] Saving session:",{sessionId:d.id,sessionName:d.name,exerciseCount:d.exercises.length,isEditing:!!b}),b?(L(w=>w.map(f=>f.id===b.id?d:f)),console.log("[ProgramBuilder] Updated existing session")):L(w=>{const f=[...w,d];return console.log("[ProgramBuilder] Added new session. Total sessions:",f.length),f}),p(!1),D(null)},a=t=>{confirm("Are you sure you want to delete this session?")&&L(x=>x.filter(d=>d.id!==t))},h=(t,x)=>{const d=[...m];x==="up"&&t>0?[d[t-1],d[t]]=[d[t],d[t-1]]:x==="down"&&t<m.length-1&&([d[t],d[t+1]]=[d[t+1],d[t]]),d.forEach((w,f)=>{w.order=f}),L(d)},C=()=>{if(!k.trim()){alert("Please enter a program name first");return}try{const t=JSON.parse(localStorage.getItem("program-templates")||"[]"),x={id:Date.now().toString(),name:k,description:N,level:T,sessions:m,createdAt:new Date().toISOString()};t.push(x),localStorage.setItem("program-templates",JSON.stringify(t)),M(!1),alert("Program saved as template!")}catch(t){console.error("Error saving template:",t),alert("Failed to save template")}},F=()=>{if(!k.trim()){alert("Please enter a program name");return}if(m.length===0){alert("Please add at least one session");return}const t=_.currentUser;if(!t){alert("You must be logged in to save a program");return}console.log("[ProgramBuilder] Saving program:",{name:k,sessionCount:m.length,totalExercises:E(),sessions:m.map(d=>({id:d.id,name:d.name,exerciseCount:d.exercises.length}))});const x={name:k,description:N,level:T,createdBy:t.uid,createdAt:(l==null?void 0:l.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),sessions:m,isPublic:(l==null?void 0:l.isPublic)||!1,tags:(l==null?void 0:l.tags)||[]};j(x)},E=()=>m.reduce((t,x)=>t+x.exercises.length,0),B=()=>m.reduce((t,x)=>t+x.exercises.reduce((d,w)=>{var f;return d+(((f=w.setsData)==null?void 0:f.length)||w.sets)},0),0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:e.jsxs("div",{className:"bg-[#23272F] rounded-xl w-full max-w-6xl h-5/6 flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:l?"Edit Program":"Create Program"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white text-2xl font-bold w-8 h-8 flex items-center justify-center transition-colors",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Name *"}),e.jsx("input",{type:"text",placeholder:"e.g., Push/Pull/Legs, Upper/Lower Split",value:k,onChange:t=>R(t.target.value),className:"w-full px-4 py-3 bg-[#181A20] text-white rounded-lg border border-white/10 focus:border-blue-500 focus:outline-none text-lg",autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty Level"}),e.jsxs("select",{value:T,onChange:t=>$(t.target.value),className:"w-full px-4 py-3 bg-[#181A20] text-white rounded-lg border border-white/10 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"beginner",children:"ðŸŸ¢ Beginner"}),e.jsx("option",{value:"intermediate",children:"ðŸŸ¡ Intermediate"}),e.jsx("option",{value:"advanced",children:"ðŸ”´ Advanced"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>M(!0),disabled:m.length===0,className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors",children:[e.jsx(ye,{className:"w-4 h-4"}),"Save as Template"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Description (Optional)"}),e.jsx("textarea",{placeholder:"Describe your program goals, frequency, and notes...",value:N,onChange:t=>u(t.target.value),className:"w-full px-4 py-3 bg-[#181A20] text-white rounded-lg border border-white/10 focus:border-blue-500 focus:outline-none resize-none",rows:3})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:m.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx(H,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No sessions added yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:'Create sessions like "Push Day", "Pull Day", "Leg Day" etc.'}),e.jsxs("button",{onClick:S,className:"px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto text-lg font-medium transition-colors",children:[e.jsx(H,{className:"w-5 h-5"}),"Create First Session"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Program Sessions (",m.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[E()," exercises â€¢ ",B()," total sets"]})]}),m.map((t,x)=>e.jsxs("div",{className:"bg-[#181A20] rounded-xl p-5 border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-lg",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[t.exercises.length," exercise",t.exercises.length!==1?"s":""," â€¢",t.exercises.reduce((d,w)=>{var f;return d+(((f=w.setsData)==null?void 0:f.length)||w.sets)},0)," sets",t.notes&&e.jsxs("span",{className:"ml-2 text-gray-500",children:["â€¢ ",t.notes]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(x,"up"),disabled:x===0,className:"p-2 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Move up",children:"â†‘"}),e.jsx("button",{onClick:()=>h(x,"down"),disabled:x===m.length-1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Move down",children:"â†“"}),e.jsx("button",{onClick:()=>W(t),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit session",children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(t.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete session",children:e.jsx(Ee,{className:"w-4 h-4"})})]})]}),t.exercises.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-[#23272F] rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-xs font-medium text-gray-400 mb-3",children:"EXERCISES:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.exercises.slice(0,6).map((d,w)=>{var f;return e.jsxs("div",{className:"text-sm text-gray-300 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[d.name," (",((f=d.setsData)==null?void 0:f.length)||d.sets," sets)"]})]},`${t.id}-exercise-${w}-${d.name}`)})}),t.exercises.length>6&&e.jsxs("div",{className:"text-xs text-gray-500 mt-3 text-center",children:["+",t.exercises.length-6," more exercises..."]})]})]},t.id)),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("button",{onClick:S,className:"px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto text-lg font-medium transition-colors",children:[e.jsx(H,{className:"w-5 h-5"}),"Add Another Session"]})})]})}),e.jsx("div",{className:"p-6 border-t border-white/10 bg-[#1A1D23]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-gray-400 text-sm",children:[e.jsxs("div",{className:"font-medium",children:[m.length," session",m.length!==1?"s":""," â€¢ ",E()," exercises â€¢ ",B()," total sets"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"ðŸ’¡ Create sessions first, then add exercises to each session"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:g,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:m.length===0||!k.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:l?"Update Program":"Save Program"})]})]})})]})}),v&&e.jsx(Re,{onClose:()=>{p(!1),D(null)},onSave:i,initialSession:b||void 0,sessionName:b?b.name:`Session ${m.length+1}`}),z&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-60",children:e.jsxs("div",{className:"bg-[#23272F] p-6 rounded-lg max-w-md w-full",children:[e.jsx("h3",{className:"text-white text-lg font-bold mb-4",children:"Save as Template"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"This will save the entire program with all sessions as a reusable template."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save Template"})]})]})})]})};export{Ee as F,Pe as P,Re as S,H as a,Ce as b};
//# sourceMappingURL=ProgramBuilder-9c_VX2pN.js.map
